(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,a){e.exports=a(244)},116:function(e,t,a){},244:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"login",function(){return N}),a.d(n,"registerUser",function(){return A}),a.d(n,"logout",function(){return C}),a.d(n,"saveUserInfo",function(){return k});var r={};a.r(r),a.d(r,"addNotification",function(){return S}),a.d(r,"clearNotification",function(){return w});var c={};a.r(c),a.d(c,"fetchArticles",function(){return V}),a.d(c,"fetchArticlesFromCategory",function(){return M}),a.d(c,"fetchSingleArticle",function(){return B}),a.d(c,"saveArticles",function(){return G}),a.d(c,"saveSingleArticle",function(){return J}),a.d(c,"deleteArticle",function(){return H}),a.d(c,"removeArticle",function(){return P}),a.d(c,"updateArticle",function(){return z}),a.d(c,"createArticle",function(){return Y});var o=a(0),i=a.n(o),l=a(53),s=a.n(l),u=(a(116),a(3)),p=a(4),m=a(7),d=a(5),f=a(6),h=a(14),b=a(32),g=a(13),y=a(8),O=a(105),v=a.n(O).a.create({baseURL:"https://whispering-temple-18802.herokuapp.com"}),E=function(e){return{Authorization:"JWT ".concat(e)}},j=v,N=function(e){var t=e.username,a=e.password,n=e.followSuccess,r=e.followFailure;return function(e){return j.post("/auth",{username:t,password:a}).then(function(a){e(k({token:a.data.access_token,username:t})),n&&n()}).catch(function(e){r&&r(e.response)})}},A=function(e){var t=e.username,a=e.password,n=e.firstName,r=e.lastName,c=e.afterSuccess,o=e.afterFailure;return function(e,i){return j.post("/users",null,{data:{username:t,password:a,first_name:n,last_name:r}}).then(function(e){c&&"function"===typeof c&&c()}).catch(function(e){o&&"function"===typeof o&&o()})}},C=function(){return{type:"REMOVE_USER_INFO"}},k=function(e){return{type:"SAVE_USER_INFO",payload:{token:e.token,username:e.username}}},S=function(e){var t=e.type;return{type:"ADD_NOTIFICATION",payload:{type:void 0===t?"success":t,message:e.message}}},w=function(){return{type:"CLEAR_NOTIFICATION"}},I=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).logInOrOut=function(){return a.props.isAuth?i.a.createElement("div",null,i.a.createElement("button",{onClick:a.handleLogout,className:"btn btn-danger btn-lg"},"Log Out")):i.a.createElement("div",null,i.a.createElement(h.b,{to:"/register",className:"btn btn-danger btn-lg"},"Register"),i.a.createElement(h.b,{to:"/login",className:"btn btn-outline-danger btn-lg ml-3"},"Sign In"))},a.handleLogout=function(){confirm("Are your sure to log out?")&&(a.props.logout(),a.props.addNotification({message:"Logged out successfully!"}))},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("nav",{className:"navbar navbar-expand-lg navbar navbar-dark bg-dark"},i.a.createElement("div",{className:"container"},i.a.createElement(h.b,{to:"/"},i.a.createElement("h1",{className:"display-4 text-light",href:"#"},"Catalog App")),this.logInOrOut()))}}]),t}(o.Component),F=Object(y.b)(function(e){var t=e.auth;return{isAuth:t&&t.token}},Object(g.a)({},n,r))(I),_=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.bold&&JSON.parse(this.props.bold)?"font-weight-bold":"";return i.a.createElement("span",Object.assign({style:{cursor:"pointer"}},this.props,{className:"text-danger lead ".concat(e)}),this.props.children)}}]),t}(o.Component),x=function(){return function(e){return j.get("/categories").then(function(t){e(L(t.data))})}},L=function(e){return{type:"SAVE_CATEGORIES",payload:e}},T=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleCategoryClick=function(e,t){a.props.selectCategory(e)},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCategories()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"pr-5 border-right"},i.a.createElement("h2",null,"Categories"),i.a.createElement("div",{className:"d-flex flex-column"},this.props.categories.map(function(t){var a=t.name,n=t.id;return i.a.createElement(_,{bold:(a===e.props.selectedCategory).toString(),onClick:function(){return e.handleCategoryClick(a)},key:n},a)})))}}]),t}(o.Component),R=Object(y.b)(function(e){return{categories:e.categories,selectedCategory:e.selectedCategory}},{fetchCategories:x,selectCategory:function(e){return{type:"SELECT_CATEGORY",payload:e}}})(T),D=a(37),U=a.n(D),V=function(){return function(e){return j.get("articles").then(function(t){e(G(t.data))})}},M=function(e){return function(t){return j.get("categories/".concat(e,"/articles")).then(function(e){t(G(e.data))})}},B=function(e){var t=e.id,a=e.followSuccess,n=e.followFailure;return function(e){return j.get("articles/".concat(t)).then(function(t){e(J(t.data)),a&&a()}).catch(function(e){console.log(e),n&&n()})}},G=function(e){return{type:"SAVE_ARTICLES",payload:e}},J=function(e){return{type:"SAVE_SINGLE_ARTICLE",payload:e}},H=function(e){var t=e.articleId,a=e.followingFn;return function(e,n){return j.delete("articles/".concat(t),{headers:{Authorization:"JWT ".concat(n().auth.token)}}).then(function(){e(P(t)),a()}).catch(function(e){return console.log("Can not delete article",e.response)})}},P=function(e){return{type:"REMOVE_ARTICLE",payload:e}},z=function(e){var t=e.articleId,a=e.updatedArticle,n=e.afterSuccess,r=e.afterFailure;return function(e,c){return j.put("articles/".concat(t),null,{data:U.a.pick(a,["title","body","category_id"]),headers:E(c().auth.token)}).then(function(t){e(J(t.data)),n()}).catch(function(e){r(e.response)})}},Y=function(e){var t=e.article,a=e.afterSuccess,n=e.afterFailure;return function(e,r){return j.post("articles",null,{data:U.a.pick(t,["title","body","category_id"]),headers:E(r().auth.token)}).then(function(t){var n=t.data;e(J(n)),a&&"function"===typeof a&&a(n)}).catch(function(e){n&&"function"===typeof n&&n(e.response)})}},q=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("span",{className:"text-muted font-italic"},this.props.children)}}]),t}(o.Component),W=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).renderHeading=function(){return a.props.selectedCategory?i.a.createElement("h2",null,a.props.selectedCategory):i.a.createElement("h2",null,"Latest Items")},a.renderArticles=function(){var e=a.props,t=e.selectedCategory,n=e.articles;return(n=t?n.filter(function(e){return e.category.name===t}):n).map(function(e){var t=e.id,a=e.title,n=e.category;return i.a.createElement(h.b,{to:"/article/".concat(t),key:t},i.a.createElement(_,null,a,i.a.createElement(q,null," (",n&&n.name,")")))})},a.renderAddingAuthBased=function(){return a.props.isAuth?i.a.createElement(h.b,{to:"/article/new",className:"lead"},i.a.createElement("i",{className:"fas fa-plus-circle"})," Add ur new article"):null},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchArticles()}},{key:"render",value:function(){return i.a.createElement("div",{className:"pl-5"},this.renderHeading(),this.renderAddingAuthBased(),i.a.createElement("div",{className:"d-flex flex-column"},this.renderArticles()))}}]),t}(o.Component),X=Object(y.b)(function(e){var t=e.articles,a=e.selectedCategory,n=e.auth;return{selectedCategory:a,articles:Object.keys(t).map(function(e){return t[e]}),isAuth:n&&!!n.token}},{fetchArticles:V})(W),K=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"d-flex"},i.a.createElement("div",{className:"w-30"},i.a.createElement(R,null)),i.a.createElement("div",{className:"w-70"},i.a.createElement(X,null)))}}]),t}(o.Component),Q=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"border p-4"},this.props.children)}}]),t}(o.Component),Z=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).renderButtonsAuthorBased=function(){var e=a.props,t=e.isAuth,n=e.article;return t&&n&&n.author.username===a.props.currentUser?i.a.createElement("div",{className:"btn-group"},i.a.createElement(h.b,{className:"btn btn-dark",to:"/article/".concat(n.id,"/edit")},"Edit"),i.a.createElement(h.b,{className:"btn btn-warning",to:"/article/".concat(n.id,"/delete")},"Delete")):null},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"renderTime",value:function(e){var t=e.split("T")[0],a=e.split("T")[1].split("+")[0];return"on ".concat(t," at ").concat(a)}},{key:"render",value:function(){var e=this.props.article||{},t=e.title,a=e.body,n=e.author,r=e.created_at;return i.a.createElement(o.Fragment,null,i.a.createElement("h3",{className:"text-dark"},t),i.a.createElement("h6",{className:"text-muted"},"Created By ",i.a.createElement("span",{className:"badge badge-info"},"@",n&&n.username),i.a.createElement("span",null," ",r&&this.renderTime(r))),i.a.createElement("p",{id:"articleBody"},a),this.renderButtonsAuthorBased())}}]),t}(o.Component),$=Object(y.b)(function(e,t){var a=e.articles,n=e.auth;return{article:a[t.match.params.id],isAuth:n&&!!n.token,currentUser:n&&n.username}},Object(g.a)({},c))(Z),ee=a(9),te=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleDeleteClick=function(){a.props.deleteArticle({articleId:a.props.match.params.id,followingFn:a.afterDeleteSuccess})},a.afterDeleteSuccess=function(){a.props.history.push("/"),a.props.addNotification({message:"Deleted Successfully"})},a.componentDidMount=function(){a.props.article||a.props.fetchSingleArticle({id:a.props.match.params.id})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement(o.Fragment,null,i.a.createElement("h3",null,"Delete Item"),i.a.createElement("p",null,"Are you sure you want to delete?"),i.a.createElement("button",{onClick:this.handleDeleteClick,className:"btn btn-outline-danger"},"I'm sure"))}}]),t}(o.Component),ae=Object(ee.d)(Object(y.b)(function(e,t){return{article:e.articles[t.match.params.id]}},Object(g.a)({},c,r)))(te),ne=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Page Not Found")}}]),t}(o.Component),re=a(27),ce=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;a.props.login({username:n,password:r,followSuccess:a.afterLoginSuccess,followFailure:a.afterLoginFailure})},a.afterLoginSuccess=function(){a.props.history.push("/"),a.props.addNotification({message:"Login successfully"})},a.afterLoginFailure=function(e){a.props.addNotification({type:"error",message:e})},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(re.a)({},n,r))},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("form",{className:"col-lg-6 mx-auto",onSubmit:this.handleSubmit},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"usernameInput"},"Username"),i.a.createElement("input",{name:"username",value:this.state.username,onChange:this.handleInputChange,type:"text",className:"form-control",id:"usernameInput"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"usernameInput"},"Password"),i.a.createElement("input",{name:"password",value:this.state.password,onChange:this.handleInputChange,type:"password",className:"form-control",id:"passwordInput"})),i.a.createElement("button",{type:"submit",className:"btn btn-success btn-block"},"Log In"))}}]),t}(o.Component),oe=Object(y.b)(null,Object(g.a)({},n,r))(ce),ie=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.message,a=e.type;return t?"success"===a?i.a.createElement("div",{className:"alert alert-success text-center",role:"alert"},this.props.message):"error"===a?i.a.createElement("div",{className:"alert alert-danger text-center",role:"alert"},this.props.message):void 0:null}}]),t}(o.Component),le=Object(y.b)(function(e){var t=e.notification;return{message:t.message,type:t.type}},null)(ie),se=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.history.listen(function(t){e.props.message&&e.props.clearNotification()})}},{key:"render",value:function(){return this.props.children}}]),t}(o.Component),ue=Object(ee.d)(b.f,Object(y.b)(function(e){return{message:e.notification.message}},Object(g.a)({},r)))(se),pe=a(246),me=a(245),de=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.categories.length||this.props.fetchCategories()}},{key:"render",value:function(){return this.props.children}}]),t}(o.Component),fe=Object(y.b)(function(e){return{categories:e.categories}},{fetchCategories:x})(de),he=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).renderHeading=function(){return"edit"===a.props.type?i.a.createElement("h3",null,"Edit Article"):i.a.createElement("h3",null,"Create ur new Article")},a.renderField=function(e){var t=e.input,a=e.label,n=e.type,r=e.meta,c=r.touched,o=r.error,l=e.rows;return i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"titleInput"},a),"text"===n&&i.a.createElement("input",Object.assign({className:"form-control"},t,{type:n})),"textarea"===n&&i.a.createElement("textarea",Object.assign({className:"form-control"},t,{rows:l})),c&&o&&i.a.createElement("h6",{className:"form-text text-danger"},o))},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.pristine,n=e.submitting,r=e.valid;return i.a.createElement(fe,null,i.a.createElement("form",{className:"col-lg-10 mx-auto",onSubmit:t(this.props.onFormSubmit)},this.renderHeading(),i.a.createElement(pe.a,{name:"title",label:"Title",component:this.renderField,type:"text",className:"form-control"}),i.a.createElement(pe.a,{name:"body",label:"Body",component:this.renderField,type:"textarea",rows:"5",className:"form-control"}),i.a.createElement("div",{className:"form-group"},i.a.createElement(pe.a,{className:"form-control",name:"category_id",component:"select"},this.props.categories.map(function(e){var t=e.name,a=e.id;return i.a.createElement("option",{value:a,key:a},t)}))),i.a.createElement("div",{className:"form-group"},i.a.createElement("button",{type:"submit",disabled:!r||a||n,className:"btn btn-primary btn-block"},"Submit"))))}}]),t}(o.Component),be=Object(ee.d)(Object(y.b)(function(e,t){var a=e.categories,n=e.articles,r={};if("edit"===t.type){var c=n[t.match.params.id];c&&((c=U.a.pick(c,["title","body","category"])).category_id=c.category.id,r=U.a.omit(c,"category"))}return{categories:a,initialValues:Object(g.a)({category_id:a[0]&&a[0].id||1},r)}}),Object(me.a)({form:"articleForm",enableReinitialize:!0,validate:function(e){var t={};return e.title||(t.title="Title required"),e.body||(t.body="Body required"),t}}))(he),ge=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleLocalFormSubmit=function(e){e=Object(g.a)({},e,{category_id:parseInt(e.category_id)}),a.props.updateArticle({articleId:a.props.match.params.id,updatedArticle:e,afterSuccess:a.afterSuccess,afterFailure:a.afterFailure})},a.afterSuccess=function(){a.props.history.push("/article/".concat(a.props.match.params.id)),a.props.addNotification({message:"Updated article successfully"})},a.afterFailure=function(){a.props.addNotification({message:"Failed to update the article",type:"error"})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement(be,Object.assign({},this.props,{type:"edit",onFormSubmit:this.handleLocalFormSubmit}))}}]),t}(o.Component),ye=Object(ee.d)(b.f,Object(y.b)(null,{updateArticle:z,addNotification:S}))(ge),Oe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",firstName:"",lastName:""},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(re.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault(),a.props.registerUser(Object(g.a)({},a.state,{afterSuccess:a.afterRegisterSuccess,afterFailure:a.afterRegisterFailure}))},a.afterRegisterSuccess=function(){a.props.history.push("/login"),a.props.addNotification({message:"Registered successfully. You can log in now!"})},a.afterRegisterFailure=function(e){console.log("error: ",e),a.props.addNotification({type:"error",message:"User register failed"})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("form",{className:"col-lg-6 mx-auto",onSubmit:this.handleSubmit},i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"usernameInput"},"Username"),i.a.createElement("input",{name:"username",onChange:this.handleInputChange,type:"text",className:"form-control",id:"usernameInput"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"usernameInput"},"Password"),i.a.createElement("input",{name:"password",onChange:this.handleInputChange,type:"password",className:"form-control",id:"passwordInput"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"firstNameInput"},"First Name"),i.a.createElement("input",{name:"firstName",onChange:this.handleInputChange,type:"text",className:"form-control",id:"firstNameInput"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"lastNameInput"},"Last Name"),i.a.createElement("input",{name:"lastName",onChange:this.handleInputChange,type:"text",className:"form-control",id:"lastNameInput"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("button",{className:"btn btn-success btn-block"},"Sign Up")))}}]),t}(o.Component),ve=Object(y.b)(null,Object(g.a)({},n,r))(Oe),Ee=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.isAuth?i.a.createElement(b.a,{to:"/"}):this.props.children}}]),t}(o.Component),je=Object(y.b)(function(e){return{isAuth:!!e.auth.token}})(Ee),Ne=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).checkAuth=function(){a.props.isAuth||a.props.history.push("/")},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.checkAuth()}},{key:"componentDidUpdate",value:function(){this.checkAuth()}},{key:"render",value:function(){return this.props.children}}]),t}(o.Component),Ae=Object(ee.d)(Object(y.b)(function(e){return{isAuth:!!e.auth.token}}),b.f)(Ne),Ce=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).checkAuthor=function(){var e=a.props,t=e.article,n=e.currentUser;t.author.username!==n&&a.exit()},a.afterArticleFetchingFailure=function(){a.exit()},a.exit=function(){a.props.history.push("/")},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.children}},{key:"componentDidMount",value:function(){var e=this.props,t=e.isAuth,a=e.match,n=e.fetchSingleArticle,r=e.article;t&&a.params||this.exit(),r?this.checkAuthor():n({id:a.params.id,followFailure:this.afterArticleFetchingFailure})}},{key:"componentDidUpdate",value:function(){this.checkAuthor()}}]),t}(o.Component),ke=Object(ee.d)(Object(y.b)(function(e,t){var a=e.auth,n=e.articles;return{isAuth:!!a.token,article:n[t.match.params.id],currentUser:a.username}},{fetchSingleArticle:B}),b.f)(Ce),Se=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleLocalFormSubmit=function(e){e=Object(g.a)({},e,{category_id:parseInt(e.category_id)}),a.props.createArticle({article:e,afterSuccess:a.afterSuccess,afterFailure:a.afterFailure})},a.afterSuccess=function(e){a.props.history.push("/article/".concat(e.id)),a.props.addNotification({message:"Created article successfully"})},a.afterFailure=function(){a.props.addNotification({message:"Can not create article",type:"error"})},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement(be,{type:"add",onFormSubmit:this.handleLocalFormSubmit})}}]),t}(o.Component),we=Object(ee.d)(b.f,Object(y.b)(function(e){return{categories:e.categories}},{createArticle:Y,addNotification:S}))(Se),Ie=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).afterFetchingFailure=function(){a.props.history.push("/")},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.categories.length||this.props.fetchSingleArticle({id:this.props.match.params.id,followSuccess:this.afterFetchingSuccess,followFailure:this.afterFetchingFailure})}},{key:"render",value:function(){return this.props.children}}]),t}(o.Component),Fe=Object(ee.d)(Object(y.b)(function(e,t){return{categories:e.categories}},{fetchSingleArticle:B}),b.f)(Ie),_e=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(h.a,null,i.a.createElement(ue,null,i.a.createElement(F,null),i.a.createElement(le,null),i.a.createElement("div",{className:"container my-4"},i.a.createElement(Q,null,i.a.createElement(b.d,null,i.a.createElement(b.b,{path:"/",exact:!0,component:K}),i.a.createElement(b.b,{path:"/login",render:function(){return i.a.createElement(je,null,i.a.createElement(oe,null))}}),i.a.createElement(b.b,{path:"/register",render:function(){return i.a.createElement(je,null,i.a.createElement(ve,null))}}),i.a.createElement(b.b,{path:"/article/new",render:function(){return i.a.createElement(Ae,null,i.a.createElement(we,null))}}),i.a.createElement(b.b,{path:"/article/:id/edit",render:function(e){return i.a.createElement(ke,e,i.a.createElement(ye,e))}}),i.a.createElement(b.b,{path:"/article/:id/delete",render:function(e){return i.a.createElement(ke,e,i.a.createElement(ae,e))}}),i.a.createElement(b.b,{path:"/article/:id",render:function(e){return i.a.createElement(Fe,e,i.a.createElement($,e))}}),i.a.createElement(ne,{path:"/notfound"})))))))}}]),t}(o.Component);var xe=function(){var e=localStorage.getItem("token")||null;return{username:localStorage.getItem("username")||null,token:e}}(),Le=a(109),Te=a(247),Re={message:"",type:""},De=Object(ee.c)({notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"ADD_NOTIFICATION":return t.payload;case"CLEAR_NOTIFICATION":return Re;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SAVE_USER_INFO":return function(e){var t=e.token,a=e.username;localStorage.setItem("token",t),localStorage.setItem("username",a)}(t.payload),t.payload;case"REMOVE_USER_INFO":return localStorage.removeItem("token"),localStorage.removeItem("username"),{token:null,username:null};default:return e}},articles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SAVE_ARTICLES":var a=t.payload.reduce(function(e,t){return e[t.id]=t,e},{});return Object(g.a)({},e,a);case"SAVE_SINGLE_ARTICLE":var n=t.payload;return Object(g.a)({},e,Object(re.a)({},n.id,n));case"REMOVE_ARTICLE":return Object.keys(e).filter(function(e){return e!==t.payload}).reduce(function(t,a){return t[a]=e[a],t},{});default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SAVE_CATEGORIES":return Object(Le.a)(t.payload);default:return e}},form:Te.a,selectedCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SELECT_CATEGORY":return t.payload;default:return e}}}),Ue=a(108);s.a.render(i.a.createElement(function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ee.d,a=Object(ee.e)(De,e.initialState,t(Object(ee.a)(Ue.a)));return i.a.createElement(y.a,{store:a},e.children)},null,i.a.createElement(_e,null)),document.getElementById("root"))}},[[111,1,2]]]);
//# sourceMappingURL=main.2ec4f13e.chunk.js.map